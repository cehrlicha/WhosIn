<div id="wrapper">

<!-- test comment -->
        <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-brand">
                    <a href="#" id="sidebar_title">
                        <%= @event.title %>
                    </a>
                </li>
                <li>
                    <a href="#">Dinner Dashboard</a>
                </li>
                <li>
                    <a href="#">Dinner Pictures</a>
                </li>
                <li>
                    <a href="#">Payments</a>
                </li>
                <li>
            </ul>
        </div>
        <div id="wrapper2">
          <div id="sidebar-wrapper2">
            <ul class="sidebar-nav">
              <div class="event_page_menu_choices">
                <div class="required_items form-control" id="menu_snacks">
                 <% @event.menu_items.each do |item|  %>
                 <% if item.invitation.nil? %>
                 <div class="to_bring_formgroup">
                   <%= simple_form_for [@event, item], wrapper: :inline_form, html: {class: "form-inline"} do |f| %>
                   <%= f.input :name, {:placeholder => 'name', :input_html => { :class => 'text_hover', :style => 'display: inline;' }} %>
                   <%= f.input :quantity, {:label=>false, :placeholder => 'quantity', :input_html => { :class => 'text_hover', :style => 'display: inline; width: 35%' }} %>
                   <%= f.button :submit, 'update'%>
                   <% end %>
                   <%= link_to event_menu_item_path(@event, item),method: :delete, id: item.id, event_id: @event.id, class: "inline_display" do %> <i class="fa fa-trash"></i> <% end %>
                 </div>
                 <% end %>
                 <% end %>
               </div>
             </div>
            </ul>
          </div>
        </div>
        <!-- /#sidebar-wrapper -->

        <!-- Page Content -->
<div id="page-content-wrapper">
<div class="container-fluid-right container-fluid-left">
<div class="row">


    <div banner_form_pack>
      <div class="event_banner_div">
      <!-- show event picture if it already exists -->
        <% if @event.photo.blank?  %>
          <% @event.remote_photo_url = "http://via.placeholder.com/400x300"%>
        <% end %>
          <div class="banner_edit" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.2)),
           url('<%= cl_image_path @event.photo , height: 300, width: 400, crop: :fill %>')">
              <a href="#menu-toggle" class="btn btn-warning" id="menu-toggle" style="position: relative; top : 10px; left: 10px;"><i class="fa fa-arrow-right" aria-hidden="true"></i></a>
              <div class="upload_image">
                <%= simple_form_for(@event) do |f| %>
                  <%= f.input :photo, class: "btn btn-default", label: false %>
                  <%= f.input :photo_cache, as: :hidden %>
                  <%= f.submit %>
              <% end %>
              </div>
          </div>

      </div>

      <div class="venue-informations">

        <form action="/events/<%=@event.id%>" method="post" >
          <input type="hidden" name="_method" value="patch" class="venue_info_element">
            <%= hidden_field_tag :authenticity_token, form_authenticity_token %>

          <input type="text" name="event[title]" class="venue_info_element" placeholder="Title">
          <div class="venue_info_element">
            <div class="date_picker_format" >
              <div class='input-group date' id='datetimepicker6'>
                <input type='text' class="form-control" name="event[start_date]" value="<%= Date.today %>" />
                <span class="input-group-addon">
                  <span class="glyphicon glyphicon-calendar"></span>
                </span>
              </div>
            </div>

            <div class="date_picker_format">
              <div class='input-group date' id='datetimepicker7'>
                <input type='text' class="form-control" name="event[end_date]"/>
                <span class="input-group-addon">
                  <span class="glyphicon glyphicon-calendar"></span>
                </span>
              </div>
            </div>
          </div>

          <input type="text" name="event[address]" class="venue_info_element" placeholder="Address">
          <div class="choice_buttons flex-between venue_info_element">
            <%= link_to "See event", event_path(@event), class: "btn btn-default btn-warning" %>
            <input type="submit" class="btn btn-default" class="venue_info_element">
            <%= link_to "Delete event", event_path(@event), method: :delete, class: "btn btn-default btn-danger" %>
          </div>
        </form>


      </div>
    </div>

<div class="container">


  <div class="row margin description_padding" style="margin-top: -150px;">
    <div class="col-xs-12 col-sm-6">

      <div class="venue-informations-free-spots ">
      <p><em>Add your free spots</em></p>
        <% @event.free_spots.times do %>
          <button class="free-spots"><%= link_to deletefreespot_event_path(@event) do %> <i class="fa fa-trash" style="color: white"></i> <% end %></button>
        <% end %>
        <%= link_to "+", addfreespot_event_path(@event), style: "color: #DB6618"%>
      </div>

    </div>
    <div class="col-xs-12 col-sm-6">
  <!-- Trigger the modal with a button -->
  <div class="event-friend-invited">
  <p><em>Invite your friends</em></p>
  <button type="button" class="btn btn-warning" data-toggle="modal" data-target="#example">Invite Friends</button>
        <% @event.notresponded.each do |guest| %>
        <span id="invited-friend"> <%= link_to event_invitation_path(@event, guest.invitation(@event)), method: :delete do %> <%= image_tag guest.facebook_picture_url, class: "avatar-large invited-friend-avatar"%><i class="fa fa-trash hidden" id="invited-friend-delete"></i><% end %> </span>
        <% end %>
      <%= link_to "Send Invitation", event_send_invitation_path(@event), class: "btn btn-success" %>
      </div>

    <form action="<%= event_invitations_path(@event) %>" method="POST">
    <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
      <div class="modal fade" tabindex="-1" role="dialog" id="example">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title">Invite your friends</h4>
            </div>
              <div>
                <ul class="list-group">
                  <% @friends.each do |friend| %>
                  <% if @event.guests.include? friend %>
                    <li class="list-group-item">
                      <input type="checkbox" disabled checked name="friends[]" value=<%= friend["id"] %> id="friend" />
                      <label for="friend"><%= image_tag friend.facebook_picture_url, class: "avatar picture"%><%= friend.first_name %> (invited) </label>
                    </li>
                  <% else %>
                    <li class="list-group-item">
                      <input type="checkbox" name="friends[]" value=<%= friend["id"] %> id="friend" />
                      <label for="friend"><%= image_tag friend.facebook_picture_url, class: "avatar picture"%><%= friend.first_name %></label>
                    </li>
                  <% end %>
                  <% end %>
                </ul>
                <!-- add simple form with email and name for user that does not exist -->
                <!-- send to user model and create user + invitation -->
                <!-- create avatar with initials -->
              </div>
              <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          <input type="submit" class="btn btn-primary" >
            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->
    </form>

    </div>
  </div>

  <div class="row margin">
    <div class="col-xs-12 col-sm-12">

      <div class="event_description description_padding text-center">
        <%= simple_form_for @event do |f| %>
          <%= f.input :description %>
          <button type="submit" class="btn btn-default">
              <i class="icon-save" style="color: white"></i> save
          </button>
        <% end %>
      </div>

    </div>
  </div>

  <div class="row margin">
    <div class="col-xs-12 col-sm-12">
      <div class="menu-box">
      <div class="flex-form menu_category">
        <div class="menu_title">
          <h5>APPETIZER</h5>
        </div>
        <div >
          <div class="menu_items_box">
            <% @event.menu_items.each do |item|  %>
            <% if (item.category == "Appetizer") && !item.invitation.nil? %>
            <%= simple_form_for [@event, item], wrapper: :inline_form, html: {class: "form-inline inline_display"} do |f| %>

            <%= f.input :name, {:placeholder => 'name'} %>

            <%= f.button :submit%>

            <% end %>
            <%= link_to event_menu_item_path(@event, item),method: :delete, id: item.id, event_id: @event.id, class: "inline_display" do %> <i class="fa fa-trash" style="margin-left: 5px; color: black"></i> <% end %>

            <% end %>
            <% end %>

          </div>
          <div>
            <%= simple_form_for [@event, @menu_item], wrapper: :inline_form, html: {class: "form-inline"} do |f| %>

            <%= f.input :name, {:placeholder => 'name'} %>
            <%= f.hidden_field :bring, value: false %>
            <%= f.hidden_field :category, value: "Appetizer" %>

            <%= f.hidden_field :event_id, value: @event.id  %>
            <button type="submit" class="btn">
              <i class="fa fa-plus" aria-hidden="true" style="color: white"></i>
            </button>
            <% end %>
          </div>
        </div>
      </div>
      <div class="flex-form menu_category">
        <div class="menu_title">
          <h5>MAIN</h5>
        </div>
        <div>
          <div class="menu_items_box">
            <% @event.menu_items.each do |item|  %>
            <% if (item.category == "Main") && !item.invitation.nil? %>
            <%= simple_form_for [@event, item], wrapper: :inline_form, html: {class: "form-inline inline_display"} do |f| %>

            <%= f.input :name, {:placeholder => 'name'} %>

            <%= f.button :submit%>
            <% end %>
            <%= link_to event_menu_item_path(@event, item),method: :delete, id: item.id, event_id: @event.id, class: "inline_display" do %> <i class="fa fa-trash" style="margin-left: 5px; color: black"></i> <% end %>
            <% end %>
            <% end %>
          </div>
          <div>
          <%= simple_form_for [@event, @menu_item], wrapper: :inline_form, html: {class: "form-inline"} do |f| %>

          <%= f.input :name, {:placeholder => 'name'} %>
          <%= f.hidden_field :bring, value: false %>
          <%= f.hidden_field :category, value: "Main" %>

          <%= f.hidden_field :event_id, value: @event.id  %>

          <button type="submit" class="btn">
            <i class="fa fa-plus" aria-hidden="true" style="color: white"></i>
          </button>

          <% end %>
          </div>
        </div>
      </div>
      <div class="flex-form menu_category ">
        <div class="menu_title">
          <h5>DESSERT</h5>
        </div>
        <div>
          <div class="menu_items_box">
            <% @event.menu_items.each do |item|  %>
            <% if (item.category == "Dessert") && !item.invitation.nil? %>
            <%= simple_form_for [@event, item], wrapper: :inline_form, html: {class: "form-inline inline_display"} do |f| %>

            <%= f.input :name, {:placeholder => 'name'} %>

            <%= f.button :submit%>
            <% end %>
            <%= link_to event_menu_item_path(@event, item),method: :delete, id: item.id, event_id: @event.id, class: "inline_display" do %> <i class="fa fa-trash" style="margin-left: 5px; color: black"></i> <% end %>
            <% end %>

            <% end %>
          </div>
          <div>
            <%= simple_form_for [@event, @menu_item], wrapper: :inline_form, html: {class: "form-inline"} do |f| %>

            <%= f.input :name, {:placeholder => 'name'} %>
            <%= f.hidden_field :bring, value: false %>
            <%= f.hidden_field :category, value: "Dessert" %>

            <%= f.hidden_field :event_id, value: @event.id  %>

            <button type="submit" class="btn">
              <i class="fa fa-plus" aria-hidden="true" style="color: white"></i>
            </button>

            <% end %>
          </div>
        </div>
      </div>
      <div class="flex-form menu_category">
        <div class="menu_title">
          <h5>TO BRING</h5>
        </div>
        <div class=" menu_items_box ">
          <%= simple_form_for [@event, @menu_item], wrapper: :inline_form, html: {class: "form-inline"} do |f| %>

          <%= f.input :name, {:placeholder => 'name'} %>
          <%= f.input :quantity, {:placeholder => 'quantity'} %>
          <%= f.hidden_field :bring, value: true %>

          <%= f.hidden_field :event_id, value: @event.id  %>
          <button type="button" class="btn" id="to_bring_btn">
            <i class="fa fa-plus" aria-hidden="true" style="color: white"></i>
          </button>
          <a href="#menu-toggle2" class="btn btn-default" id="menu-toggle2">see all</a>
          <% end %>
        </div>
      </div>
      </div>
    </div>
  </div>

  <div class="row margin">
    <div class="col-xs-12 col-sm-12">
      FEED
    </div>
  </div>
 </div>

 </div>

</div>
</div>
</div>
</div>



        <!-- /#page-content-wrapper -->

    <!-- /#wrapper -->



    <!-- jQuery -->
    <% content_for :after_js do %>

    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>


    <!-- AJAX requests -->


    <!-- Menu Toggle Script -->
    <script>
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
    </script>
    <script>
    $("#menu-toggle2").click(function(e) {
        e.preventDefault();
        $("#wrapper2").toggleClass("toggled");
    });
    </script>
    <script>
    $("stuff_to_bring").click(function(e) {
        e.preventDefault();
        $("#wrapper2").toggleClass("toggled");
    });
    </script>
    <script type="text/javascript">
    $(function () {
        $('#datetimepicker6').datetimepicker({
            format:'DD/MM/YYYY HH:mm',
            sideBySide: true,
            useCurrent: true,

        });
        $('#datetimepicker7').datetimepicker({
            format:'DD/MM/YYYY HH:mm',
            sideBySide: true,

            useCurrent: false, //Important! See issue #1075
        });
        $("#datetimepicker6").on("dp.change", function (e) {
            $('#datetimepicker7').data("DateTimePicker").minDate(e.date);
        });
        $("#datetimepicker7").on("dp.change", function (e) {
            $('#datetimepicker6').data("DateTimePicker").maxDate(e.date);
        });
        });
    </script>
    <script>
      $('#invited-friend').on('hover', function(){
        $('.invited-friend-avatar').addClass("hidden";
        $('#invited-friend-delete').removeClass("hidden");
      }, function (){
        $('#invited-friend-delete').addClass("hidden");
        $('.invited-friend-avatar').removeClass("hidden");
      });
    </script>
    <script>
      $("#menu-toggle").on('click', function(e){
        $(this).blur();
        if ($('#menu-toggle i').hasClass('fa-arrow-right')) {
          $('#menu-toggle i').removeClass('fa-arrow-right').addClass('fa-arrow-left');
        } else {
          $('#menu-toggle i').removeClass('fa-arrow-left').addClass('fa-arrow-right');
        }
      });
    </script>

    <% end %>
